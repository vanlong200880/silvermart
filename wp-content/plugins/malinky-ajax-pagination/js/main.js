var MalinkyAjaxPaging=function(t){var a=function(){function a(t,a,n){var i;return function(){var e=this,o=arguments,r=function(){i=null,n||t.apply(e,o)},p=n&&!i;clearTimeout(i),i=setTimeout(r,a),p&&t.apply(e,o)}}var n=r,i=p,e=g,o=s,w=m,h=c,v=d,x=u,j=y,b=f,T=k,L=S,E=_,I=!1,D=function(){t.ajax({type:"GET",url:L,dataType:"html",success:function(a){var n=t.parseHTML(a),i=(t(n).find(v),1),e=0;for(var o in malinkySettings)t(n).find(malinkySettings[o].posts_wrapper).length&&t(n).find(malinkySettings[o].post_wrapper).length&&t(n).find(malinkySettings[o].pagination_wrapper).length&&e++;for(var o in malinkySettings)t(n).find(malinkySettings[o].posts_wrapper).length&&t(n).find(malinkySettings[o].post_wrapper).length&&t(n).find(malinkySettings[o].pagination_wrapper).length&&(1==e?(t(n).find(malinkySettings[o].posts_wrapper).attr("data-paginator-count",i),t(n).find(malinkySettings[o].pagination_wrapper).attr("data-paginator-count",i)):(t(n).find(malinkySettings[o].posts_wrapper).attr("data-paginator-count",i),t(n).find(malinkySettings[o].posts_wrapper+" "+malinkySettings[o].pagination_wrapper).attr("data-paginator-count",i),t(n).find(malinkySettings[o].posts_wrapper+" "+malinkySettings[o].next_page_selector).attr("data-paginator-count",i),i++));var r=t(n).find(v+'[data-paginator-count="'+E+'"] '+x),p=t(v+'[data-paginator-count="'+E+'"] '+x).last(),l=t(v+'[data-paginator-count="'+E+'"] '+x);if(p.after(r),"infinite-scroll"!=h&&"load-more"!=h||(b++,1==e?(b>j&&(t('#malinky-ajax-pagination-button[data-paginator-count="'+E+'"]').parent().remove(),window.removeEventListener("scroll",P)),L=L.replace(/\/page\/[0-9]*/,"/page/"+b)):(t(n).find(T+'[data-paginator-count="'+E+'"]').attr("href")||(t('#malinky-ajax-pagination-button[data-paginator-count="'+E+'"]').parent().remove(),window.removeEventListener("scroll",P)),L=t(n).find(T+'[data-paginator-count="'+E+'"]').attr("href"))),"pagination"==h){l.remove(),history.pushState(null,null,L);var g=t(n).find(w+'[data-paginator-count="'+E+'"]').first();t(w+'[data-paginator-count="'+E+'"]').replaceWith(g)}A()},error:function(t,a){G()},complete:function(){"pagination"==h&&t("body,html").animate({scrollTop:t(v+'[data-paginator-count="'+E+'"]').offset().top-150},400),"infinite-scroll"==h&&(I=!1)}})},H=function(){t(w+'[data-paginator-count="'+E+'"]').last().before('<div class="malinky-ajax-pagination-loading" data-paginator-count="'+E+'">'+n+"</div>")},M=function(){t('.malinky-ajax-pagination-loading[data-paginator-count="'+E+'"]').show(),"load-more"!=h&&"infinite-scroll"!=h||t('#malinky-ajax-pagination-button[data-paginator-count="'+E+'"]').text(e)},A=function(){t('.malinky-ajax-pagination-loading[data-paginator-count="'+E+'"]').hide(),"load-more"!=h&&"infinite-scroll"!=h||t('#malinky-ajax-pagination-button[data-paginator-count="'+E+'"]').text(o),clearTimeout(l)},G=function(){t('.malinky-ajax-pagination-loading[data-paginator-count="'+E+'"]').hide(),clearTimeout(l)},P=a(function(){if(!I){var a=(t(document).height()-t(window).scrollTop()-t(window).height(),t(v+'[data-paginator-count="'+E+'"]').offset().top),n=t(v+'[data-paginator-count="'+E+'"]').outerHeight();t(window).height()+t(window).scrollTop()+i>a+n&&(I=!0,M(),D())}},250);"infinite-scroll"==h?t(T+'[data-paginator-count="'+E+'"]').attr("href")&&(H(),t(w+'[data-paginator-count="'+E+'"]').remove(),window.addEventListener("scroll",P)):"load-more"==h?t(T+'[data-paginator-count="'+E+'"]').attr("href")&&(t(w+'[data-paginator-count="'+E+'"]').last().after('<div class="malinky-load-more"><a href="'+L+'" id="malinky-ajax-pagination-button" class="malinky-load-more__button" data-paginator-count="'+E+'">'+s+"</a></div>"),H(),t(w+'[data-paginator-count="'+E+'"]:not(:has(>a#malinky-ajax-pagination-button[data-paginator-count="'+E+'"]))').remove(),t('#malinky-ajax-pagination-button[data-paginator-count="'+E+'"]').click(function(t){t.preventDefault(),l=setTimeout(M,750),D()})):"pagination"==h&&(H(),t(document).on("click",w+'[data-paginator-count="'+E+'"]',function(t){t.preventDefault(),l=setTimeout(M,750),L=t.target.href,D()}),window.addEventListener("popstate",function(t){L=document.URL,D()}))},n=0,i=1,e=0;for(var o in malinkySettings)t(malinkySettings[o].posts_wrapper).length&&t(malinkySettings[o].post_wrapper).length&&t(malinkySettings[o].pagination_wrapper).length&&t(malinkySettings[o].next_page_selector).length&&e++;for(var o in malinkySettings)if(t(malinkySettings[o].posts_wrapper).length&&t(malinkySettings[o].post_wrapper).length&&t(malinkySettings[o].pagination_wrapper).length&&t(malinkySettings[o].next_page_selector).length){1==e?(t(malinkySettings[o].posts_wrapper).attr("data-paginator-count",i),t(malinkySettings[o].pagination_wrapper).attr("data-paginator-count",i),t(malinkySettings[o].next_page_selector).attr("data-paginator-count",i)):(t(malinkySettings[o].posts_wrapper).attr("data-paginator-count",i),t(malinkySettings[o].posts_wrapper+" "+malinkySettings[o].pagination_wrapper).attr("data-paginator-count",i),t(malinkySettings[o].posts_wrapper+" "+malinkySettings[o].next_page_selector).attr("data-paginator-count",i),i++);var r=malinkySettings[o].ajax_loader,p=(malinkySettings[o].malinky_load_more,malinkySettings[o].malinky_load_more_button,parseInt(malinkySettings[o].infinite_scroll_buffer)),l="",g=malinkySettings[o].loading_more_posts_text,s=malinkySettings[o].load_more_button_text,m=malinkySettings[o].pagination_wrapper,c=(t(document).height()-t(m).offset().top,malinkySettings[o].paging_type),d=malinkySettings[o].posts_wrapper,u=malinkySettings[o].post_wrapper,y=parseInt(malinkySettings.max_num_pages),f=parseInt(malinkySettings.next_page_number),k=malinkySettings[o].next_page_selector,_=++n;if(1==e)var S=t(malinkySettings[o].next_page_selector).attr("href")||malinkySettings.next_page_url;else var S=t(malinkySettings[o].posts_wrapper+" "+malinkySettings[o].next_page_selector).attr("href")||malinkySettings.next_page_url;a()}}(jQuery);